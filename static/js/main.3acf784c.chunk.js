(this.webpackJsonptrybetunes=this.webpackJsonptrybetunes||[]).push([[0],{28:function(t,e,a){},39:function(t,e,a){"use strict";a.r(e);var n=a(1),r=a.n(n),c=a(20),s=a.n(c),i=(a(28),a(13)),o=a(3),u=a(4),l=a(6),d=a(5),j=a(7),h=a(2),b=a.n(h),p=a(9),f=a(0),m=function(t){Object(l.a)(a,t);var e=Object(d.a)(a);function a(){return Object(o.a)(this,a),e.apply(this,arguments)}return Object(u.a)(a,[{key:"render",value:function(){return Object(f.jsx)("p",{children:"Carregando..."})}}]),a}(r.a.Component),O=m,v=a(23),x="favorite_songs";JSON.parse(localStorage.getItem(x))||localStorage.setItem(x,JSON.stringify([]));var g=function(){return JSON.parse(localStorage.getItem(x))},k=function(t){return localStorage.setItem(x,JSON.stringify(t))},y=function(t){return function(e){setTimeout((function(){e(t)}),500)}},N=function(){return new Promise((function(t){var e=g();y(e)(t)}))},w=function(t){return new Promise((function(e){if(t){var a=g();k([].concat(Object(v.a)(a),[t]))}y("OK")(e)}))},C=function(t){return new Promise((function(e){var a=g();k(a.filter((function(e){return e.trackId!==t.trackId}))),y("OK")(e)}))},S=function(t){Object(l.a)(a,t);var e=Object(d.a)(a);function a(){var t;Object(o.a)(this,a);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(t=e.call.apply(e,[this].concat(r))).state={isChecked:!1,loading:!1},t.isFavorite=function(){var e=t.props,a=e.trackName,n=e.favoritesMusics.some((function(t){return t.trackName===a}));t.setState({isChecked:n})},t.handleChecked=function(e){var a=e.target,n=a.name,r=a.checked;t.setState({isChecked:r,loading:!0},Object(p.a)(b.a.mark((function e(){var a,c;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=t.props.arrayMusics,c=a.find((function(t){return t.trackName===n})),!r){e.next=5;break}return e.next=5,w(c);case 5:if(r){e.next=8;break}return e.next=8,C(c);case 8:t.setState({loading:!1});case 9:case"end":return e.stop()}}),e)}))),(function(){return t.isFavorite()}))},t}return Object(u.a)(a,[{key:"componentDidMount",value:function(){this.isFavorite()}},{key:"render",value:function(){var t=this.props,e=t.trackName,a=t.previewUrl,n=t.trackId,r=this.state,c=r.isChecked;return r.loading?Object(f.jsx)(O,{}):Object(f.jsxs)("div",{className:"card-music",children:[Object(f.jsx)("p",{children:e}),Object(f.jsxs)("audio",{"data-testid":"audio-component",src:a,controls:!0,children:[Object(f.jsx)("track",{kind:"captions"}),Object(f.jsx)("code",{children:"audio"})]}),Object(f.jsxs)("label",{htmlFor:e,"data-testid":"checkbox-music-".concat(n),children:["Favorita",Object(f.jsx)("input",{type:"checkbox",name:e,id:e,checked:c,onChange:this.handleChecked})]})]})}}]),a}(r.a.Component),I=S,M=function(){var t=Object(p.a)(b.a.mark((function t(e){var a,n;return b.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,fetch("https://itunes.apple.com/lookup?id=".concat(e,"&entity=song"));case 2:return a=t.sent,t.next=5,a.json();case 5:return n=t.sent,t.abrupt("return",n.results);case 7:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),A=M,D=a(16),F="user",P=function(t){return localStorage.setItem(F,JSON.stringify(t))},U=function(t){return function(e){setTimeout((function(){e(t)}),1500)}},J=function(){return new Promise((function(t){var e=JSON.parse(localStorage.getItem(F));null===e&&(e={}),U(e)(t)}))},B=function(t){return new Promise((function(e){P(Object(D.a)(Object(D.a)({},{name:"",email:"",image:"",description:""}),t)),U("OK")(e)}))},T=function(t){Object(l.a)(a,t);var e=Object(d.a)(a);function a(){var t;Object(o.a)(this,a);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(t=e.call.apply(e,[this].concat(r))).state={userName:"",loading:!0},t.fetchUser=Object(p.a)(b.a.mark((function e(){var a;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,J();case 2:a=e.sent,t.setState({userName:a,loading:!1});case 4:case"end":return e.stop()}}),e)}))),t}return Object(u.a)(a,[{key:"componentDidMount",value:function(){this.fetchUser()}},{key:"render",value:function(){var t=this.state,e=t.userName;return t.loading?Object(f.jsx)(O,{}):Object(f.jsxs)("header",{children:[Object(f.jsx)("h1",{children:"TrybeTunes"}),Object(f.jsxs)("div",{className:"data-header",children:[Object(f.jsx)("span",{"data-testid":"header-user-name",children:e.name}),Object(f.jsxs)("nav",{"data-testid":"header-component",children:[Object(f.jsx)(i.c,{to:"/search",activeClassName:"selected","data-testid":"link-to-search",children:"Pesquisa"}),Object(f.jsx)(i.c,{to:"/favorites",activeClassName:"selected","data-testid":"link-to-favorites",children:"Favoritas"}),Object(f.jsx)(i.c,{to:"/profile",activeClassName:"selected","data-testid":"link-to-profile",children:"Perfil"})]})]})]})}}]),a}(r.a.Component),R=T,K=function(t){Object(l.a)(a,t);var e=Object(d.a)(a);function a(){var t;Object(o.a)(this,a);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(t=e.call.apply(e,[this].concat(r))).state={loading:!1,arrayMusics:[],dataAlbum:"",dataArtist:"",favoritesMusics:[]},t.fetchMusics=Object(p.a)(b.a.mark((function e(){var a,n,r;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.props.match,n=a.params.id,e.next=4,A(n);case 4:r=e.sent,t.setState({arrayMusics:r,dataAlbum:r[0].collectionName,dataArtist:r[0].artistName});case 6:case"end":return e.stop()}}),e)}))),t.fetchFavoritesMusics=function(){t.setState({loading:!0},Object(p.a)(b.a.mark((function e(){return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.t0=t,e.next=3,N();case 3:return e.t1=e.sent,e.t2={favoritesMusics:e.t1,loading:!1},e.abrupt("return",e.t0.setState.call(e.t0,e.t2));case 6:case"end":return e.stop()}}),e)}))))},t}return Object(u.a)(a,[{key:"componentDidMount",value:function(){this.fetchMusics(),this.fetchFavoritesMusics()}},{key:"render",value:function(){var t=this.state,e=t.loading,a=t.arrayMusics,n=t.dataAlbum,r=t.dataArtist,c=t.favoritesMusics;return e?Object(f.jsx)(O,{}):Object(f.jsxs)("div",{"data-testid":"page-album",className:"page-album",children:[Object(f.jsx)(R,{}),Object(f.jsx)("h3",{"data-testid":"album-name",children:n}),Object(f.jsx)("span",{"data-testid":"artist-name",children:r}),Object(f.jsx)("div",{className:"musics-album",children:a.filter((function(t,e){return 0!==e})).map((function(t,e){var n=t.trackName,r=t.previewUrl,s=t.trackId;return Object(f.jsx)(I,{trackName:n,previewUrl:r,trackId:s,arrayMusics:a,favoritesMusics:c},e)}))})]})}}]),a}(r.a.Component),q=K,E=function(t){Object(l.a)(a,t);var e=Object(d.a)(a);function a(){return Object(o.a)(this,a),e.apply(this,arguments)}return Object(u.a)(a,[{key:"render",value:function(){return Object(f.jsxs)("div",{"data-testid":"page-favorites",children:[Object(f.jsx)(R,{}),"Favoritos em constru\xe7\xe3o"]})}}]),a}(r.a.Component),L=E,_=function(t){Object(l.a)(a,t);var e=Object(d.a)(a);function a(){var t;Object(o.a)(this,a);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(t=e.call.apply(e,[this].concat(r))).state={loading:!1,buttonDisabled:!0,loginName:""},t.validateButton=function(t){return t.length<3},t.handleChange=function(e){var a=e.target;t.setState({loginName:a.value,buttonDisabled:t.validateButton(a.value)})},t.handleButton=function(e){e.preventDefault();var a=t.state.loginName,n=t.props.history;t.setState({loading:!0},Object(p.a)(b.a.mark((function t(){return b.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,B({name:a});case 2:n.push("/search");case 3:case"end":return t.stop()}}),t)}))))},t}return Object(u.a)(a,[{key:"render",value:function(){var t=this.state,e=t.loginName,a=t.buttonDisabled;return t.loading?Object(f.jsx)(O,{}):Object(f.jsx)("main",{"data-testid":"page-login",children:Object(f.jsxs)("div",{className:"login",children:[Object(f.jsx)("h2",{children:"Login"}),Object(f.jsx)("label",{htmlFor:"loginName",children:Object(f.jsx)("input",{"data-testid":"login-name-input",type:"text",name:"loginName",placeholder:"Nome do usu\xe1rio",value:e,onChange:this.handleChange})}),Object(f.jsx)("button",{"data-testid":"login-submit-button",type:"submit",disabled:a,onClick:this.handleButton,children:"Entrar"})]})})}}]),a}(r.a.Component),z=_,G=function(t){Object(l.a)(a,t);var e=Object(d.a)(a);function a(){return Object(o.a)(this,a),e.apply(this,arguments)}return Object(u.a)(a,[{key:"render",value:function(){return Object(f.jsx)("div",{"data-testid":"page-not-found",children:"NotFound"})}}]),a}(r.a.Component),H=G,Q=function(t){Object(l.a)(a,t);var e=Object(d.a)(a);function a(){return Object(o.a)(this,a),e.apply(this,arguments)}return Object(u.a)(a,[{key:"render",value:function(){return Object(f.jsxs)("div",{"data-testid":"page-profile",children:[Object(f.jsx)(R,{}),"perfil  em constru\xe7\xe3o"]})}}]),a}(r.a.Component),V=Q,W=function(t){Object(l.a)(a,t);var e=Object(d.a)(a);function a(){return Object(o.a)(this,a),e.apply(this,arguments)}return Object(u.a)(a,[{key:"render",value:function(){return Object(f.jsxs)("div",{"data-testid":"page-profile-edit",children:[Object(f.jsx)(R,{}),"perfil  em constru\xe7\xe3o"]})}}]),a}(r.a.Component),X=W,Y=function(){var t=Object(p.a)(b.a.mark((function t(e){var a,n,r,c,s,i;return b.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a=encodeURI(e).replaceAll("%20","+"),n="https://itunes.apple.com/search?entity=album&term=".concat(a,"&attribute=allArtistTerm"),t.next=4,fetch(n);case 4:return r=t.sent,t.next=7,r.json();case 7:return c=t.sent,s=c.results,i=s.map((function(t){return{artistId:t.artistId,artistName:t.artistName,collectionId:t.collectionId,collectionName:t.collectionName,collectionPrice:t.collectionPrice,artworkUrl100:t.artworkUrl100,releaseDate:t.releaseDate,trackCount:t.trackCount}})),t.abrupt("return",i);case 11:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),Z=Y,$=function(t){Object(l.a)(a,t);var e=Object(d.a)(a);function a(){var t;Object(o.a)(this,a);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(t=e.call.apply(e,[this].concat(r))).state={search:"",buttonDisabled:!0,albuns:[],result:"",loading:!1},t.validateButton=function(t){return t.length<2},t.validateResult=function(){var e=t.state,a=e.albuns,n=e.search;0===a.length?t.setState({result:"Nenhum \xe1lbum foi encontrado",search:""}):t.setState({result:"Resultado de \xe1lbuns de: ".concat(n),search:""})},t.handleChange=function(e){var a=e.target;t.setState({search:a.value,buttonDisabled:t.validateButton(a.value)})},t.handleClick=Object(p.a)(b.a.mark((function e(){var a,n;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.state.search,t.setState({loading:!0}),e.next=4,Z(a);case 4:n=e.sent,t.setState({loading:!1,albuns:n},(function(){return t.validateResult()}));case 6:case"end":return e.stop()}}),e)}))),t}return Object(u.a)(a,[{key:"render",value:function(){var t=this.state,e=t.search,a=t.buttonDisabled,n=t.albuns,r=t.result;return t.loading?Object(f.jsx)(O,{}):Object(f.jsxs)("div",{"data-testid":"page-search",className:"search",children:[Object(f.jsx)(R,{}),Object(f.jsxs)("form",{children:[Object(f.jsx)("label",{htmlFor:"searchArtist",children:Object(f.jsx)("input",{type:"text",name:"searchArtist","data-testid":"search-artist-input",value:e,onChange:this.handleChange})}),Object(f.jsx)("button",{type:"button","data-testid":"search-artist-button",disabled:a,onClick:this.handleClick,children:"Pesquisar"})]}),Object(f.jsx)("h3",{children:r}),Object(f.jsx)("div",{className:"search-results",children:n.map((function(t){var e=t.collectionId,a=t.collectionName,n=t.artworkUrl100,r=t.artistName;return Object(f.jsx)("div",{className:"card-album",children:Object(f.jsxs)(i.b,{to:"/album/".concat(e),"data-testid":"link-to-album-".concat(e),children:[Object(f.jsx)("h4",{children:r}),Object(f.jsx)("p",{children:a}),Object(f.jsx)("img",{src:n,alt:a})]})},e)}))})]})}}]),a}(r.a.Component),tt=$,et=function(t){Object(l.a)(a,t);var e=Object(d.a)(a);function a(){return Object(o.a)(this,a),e.apply(this,arguments)}return Object(u.a)(a,[{key:"render",value:function(){return Object(f.jsx)("div",{children:Object(f.jsxs)(j.c,{children:[Object(f.jsx)(j.a,{path:"/project-trybetunes/",component:z,exact:!0}),Object(f.jsx)(j.a,{path:"/search",component:tt}),Object(f.jsx)(j.a,{path:"/album/:id",component:q}),Object(f.jsx)(j.a,{path:"/favorites",component:L}),Object(f.jsx)(j.a,{path:"/profile",component:V,exact:!0}),Object(f.jsx)(j.a,{path:"/profile/edit",component:X}),Object(f.jsx)(j.a,{path:"",component:H})]})})}}]),a}(r.a.Component),at=et;s.a.render(Object(f.jsx)(i.a,{children:Object(f.jsx)(at,{})}),document.getElementById("root"))}},[[39,1,2]]]);
//# sourceMappingURL=main.3acf784c.chunk.js.map